<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
      <title>
        A Brand New nanoc Site - API
      </title>
      <link href='/stylesheet.css' rel='stylesheet'>
        <!-- you don't need to keep this, but it's cool for stats! -->
        <meta content='nanoc 3.7.3' name='generator'>
      </link>
    </meta>
  </head>
  <body>
    <div id='main'>
      
      <h1 id="api">API</h1>
      
      <p>In order to interact with our API, you’re required to include an authentication token in the header of every request; this token will be provided to you by your distributor.</p>
      
      <p>For instance, to retrieve the list of users from your account, you can make the following request via <code>curl</code> command.</p>
      
      <p><code>
      curl http://learninglogin.com/api/users -H 'Authorization: Token token="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"'
      </code></p>
      
      <p>In case you receive a <code>HTTP Token: Access denied.</code> response, there’s a big chance your access token is either expired or wrong.</p>
      
      <p>All of our API endpoints’ responses are in <code>JSON</code> format.</p>
      
      <h1 id="services">Services</h1>
      
      <ul>
        <li><a href="/api/index.html#users">Users</a></li>
        <li><a href="/api/index.html#courses">Courses</a></li>
      </ul>
      
      <h2 id="users">Users</h2>
      
      <p>The <code>/api/users/{ user_id }</code> endpoint implements RESTful methods to let you interact with your data.</p>
      
      <h3 id="list">List</h3>
      
      <p>To retrieve the list of users from your account, simply send a <code>GET</code> request to the base users’ endpoint, no extra parameters are required.</p>
      
      <p><code>GET https://learninglogin.com/api/users</code></p>
      
      <h4 id="sample-response-body">Sample response body</h4>
      
      <p><code>
        [
          {
            "id":123456,
            "first_name": "Demo",
            "last_name": "User",
            "username": "demo_user",
            "email": "demo_user@learninglocin.com",
            "role": "Global Publisher"
          },
          {
            "id":123457,
            "first_name": "Demo",
            "last_name": "User2",
            "username": "demo_user2",
            "email": "demo_user2@learninglocin.com",
            "role": "Global Publisher"
          }
        ]
      </code></p>
      
      <h3 id="create">Create</h3>
      
      <p>To create a new user, send a <code>POST</code> request to the base users’ endpoint with the following parameters:</p>
      
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Required?</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>first_name</td>
            <td>string</td>
            <td>yes</td>
            <td>User’s first name</td>
          </tr>
          <tr>
            <td>last_name</td>
            <td>string</td>
            <td>yes</td>
            <td>User’s last name</td>
          </tr>
          <tr>
            <td>email</td>
            <td>string</td>
            <td>yes</td>
            <td>User’s email address</td>
          </tr>
          <tr>
            <td>username</td>
            <td>string</td>
            <td>yes</td>
            <td>User’s username, required to access the system</td>
          </tr>
          <tr>
            <td>password</td>
            <td>string</td>
            <td>yes</td>
            <td>User’s password</td>
          </tr>
          <tr>
            <td>role_string</td>
            <td>string</td>
            <td>yes</td>
            <td>User’s role: Can be ‘Trainee’, ‘Global publisher’</td>
          </tr>
          <tr>
            <td>udf_list</td>
            <td>array</td>
            <td>no</td>
            <td>List of tags associated to the user</td>
          </tr>
        </tbody>
      </table>
      
      <h4 id="sample-request-body">Sample request body</h4>
      
      <p><code>
        {
          user: {
            login_attributes: {
              first_name:'first',
              last_name:'last',
              email:'user@mail.com',
              username:'username',
              udf_list: ['accounting', 'service'],
              role_string: 'Trainee',
              password: 'abc123'
            }
          }
        }
      </code></p>
      
      <h4 id="sample-response-body-1">Sample response body</h4>
      
      <p>When the user is successfully created, our API will send a <code>JSON</code> response with the newly created user’s information:</p>
      
      <p><code>
        {
          "id": 2,
          "first_name": "first",
          "last_name": "last",
          "username": "username",
          "email": "ememe@lsl.de",
          "role": "Trainee"
        }
      </code></p>
      
      <p>If something goes wrong, the API will respond with a <code>422</code> error code and the error’s description in <code>JSON</code> format:</p>
      
      <p><code>
        {
          "errors": [
            "Login role can't be blank", 
            "Login password can't be blank"
          ]
        }
      </code></p>
      
      <h3 id="update">Update</h3>
      
      <p>To update an existing user, send a <code>PUT</code> request to the users’ endpoint <code>/api/users/{ user_id }</code> with the parameters you want to update, the same <a href="#create">parameters used when creating a user</a> are supported.</p>
      
      <h4 id="sample-request-body-1">Sample request body</h4>
      
      <p>An example request body to update a user’s name might be:</p>
      
      <p><code>
        {
          user: {
            first_name: 'New name'
          }
        }
      </code></p>
      
      <h4 id="sample-response-body-2">Sample response body</h4>
      
      <p>When the user is successfully updated, our API will send a <code>JSON</code> response with the updated user’s information:</p>
      
      <p><code>
        {
          "id": 2,
          "first_name": "New name",
          "last_name": "last",
          "username": "username",
          "email": "ememe@lsl.de",
          "role": "Trainee"
        }
      </code></p>
      
      <p>If something goes wrong, the API will respond with a <code>422</code> error code and the error’s description in <code>JSON</code> format:</p>
      
      <p><code>
        {
          "errors": [
            "First name can't be blank"
          ]
        }
      </code></p>
      
      <h3 id="remove">Remove</h3>
      
      <p>To remove a user, send a <code>DELETE</code> request to the users’ endpoint <code>/api/users/{ user_id }</code>, no parameters are required.</p>
      
      <p>When the user is successfully removed, our API will send an empty <code>JSON</code> response.</p>
      
      <p>If something goes wrong, the API will respond with a <code>422</code> error code and an empty <code>JSON</code> response.</p>
      
      <h2 id="courses">Courses</h2>
      
      <p>The <code>/api/courses</code> endpoint a couple of methods to let you retrieve information about the existing courses and assign units to your users.</p>
      
      <h3 id="list-1">List</h3>
      
      <p>To retrieve the list of courses, send a <code>GET</code> request to the base courses’ endpoint, no extra parameters are required.</p>
      
      <p><code>GET https://learninglogin.com/api/courses</code></p>
      
      <h4 id="sample-response-body-3">Sample response body</h4>
      
      <p><code>
        [
          {
            "id": 1,
            "name": "Aerial Lift",
            "code": "AL",
            "language": "English"
          },
          {
            "id": 2,
            "name": "AODA",
            "code": "AODA",
            "language": French
          }
        ]
      </code></p>
      
      <h3 id="assign-units">Assign Units</h3>
      
      <p>To create a new user, send a <code>POST</code> request to the base users’ endpoint with the following parameters:</p>
      
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Required?</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ids</td>
            <td>array</td>
            <td>yes</td>
            <td>List of login ids to which the courses will be assigned</td>
          </tr>
          <tr>
            <td>course_ids</td>
            <td>array</td>
            <td>yes</td>
            <td>List of course ids that will be assigned</td>
          </tr>
        </tbody>
      </table>
      
      <h4 id="sample-request-body-2">Sample request body</h4>
      
      <p>An example request body to assign the course with <code>id</code> 2 to users with <code>id</code> 1 and 2 will be:</p>
      
      <p><code>
        {
          ids: [1, 2],
          course_ids: [2]
        }
      </code></p>
      
      <h4 id="sample-response-body-4">Sample response body</h4>
      
      <p>When the courses are successfully assigned, our API will send an empty <code>JSON</code> response <code>{ }</code>; just in case the action requires an extra payment, the response body will include the key <code>extra_payment</code> as follows:</p>
      
      <p><code>
        {
          "extra_payment": '1'
        }
      </code></p>
      
      <p>If something goes wrong, the API will respond with a <code>422</code> error code and the error’s description in <code>JSON</code> format:</p>
      
      <p><code>
        {
          "errors": "You do not have enough units to complete this operation"
        }
      </code></p>
    </div>
    <div id='sidebar'>
      <h2>API</h2>
      <ul>
        <li>
          <a href='/api/index.html'>Getting Started</a>
        </li>
        <li>
          <a href='/api/index.html#users'>Users</a>
        </li>
        <li>
          <a href='/api/index.html#users'>Courses</a>
        </li>
      </ul>
    </div>
  </body>
</html>
